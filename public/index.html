<!DOCTYPE html>
<html>
  <head>
    <!-- note: for support on older browsers, you will need to load es5-shim and es6-shim -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.0.5/es5-shim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es6-shim/0.23.0/es6-shim.min.js"></script>
    <script src="https://unpkg.com/moralis/dist/moralis.js"></script>
    <script src="/timesync/timesync.js"></script>
  </head>
  <script>
    // authenticate moralis server
    const serverUrl = "https://wr51xzfpnivi.usemoralis.com:2053/server";
    const appId = "PDgnBWEqSUQFIRprxE5efDc7VeRnFSY6ljqP79xa";
    Moralis.start({serverUrl, appId});

    // create a timesync instance
    var ts = timesync.create({
      server: "/timesync",
      interval: 30000,
    });

    // get notified on changes in the offset
    ts.on("change", function (offset) {
      document.write("changed offset: " + offset + " ms<br>");
    });

    // get synchronized time
    setInterval(function () {
      var now = new Date(ts.now());
      document.write("now: " + now.toISOString() + " ms<br>");
    }, 1000);
  </script>
</html>

